<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Shok Habena Market - API Documentation</title>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<div id="sidebar">
			<h2>Shok Habena Market API</h2>
			<a href="#overview">Overview</a>
			<a href="#features">Features</a>
			<a href="#technologies">Technologies</a>

			<h3>API Routes</h3>
			<a href="#users">Users</a>
			<div class="submenu">
				<a href="#user-registration">Registration</a>
				<a href="#user-login">Login</a>
				<a href="#google-auth-verification">Google OAuth Verification</a>
				<a href="#google-login-register">Google Login/Register</a>
				<a href="#get-all-users">Get All Users</a>
				<a href="#get-single-user-by-id">Get Single User by ID</a>
				<a href="#update-user-role">Update User Role</a>
				<a href="#complete-user-data">Complete User Data</a>
				<a href="#change-user-password">Change User Password</a>
				<a href="#delete-user">Delete User</a>
			</div>

			<a href="#products">Products</a>
			<div class="submenu">
				<a href="#get-all-products">Get All Products</a>
				<a href="#create-product">Create Product</a>
				<a href="#get-specific-products-by-name">Get Specific Product by Name</a>
				<a href="#update-product-by-name">Update Product by Name</a>
				<a href="#delete-product">Delete Product</a>
				<a href="#get-products-by-category">Get Products by Category</a>
			</div>

			<a href="#cart">Cart</a>
			<div class="submenu">
				<a href="#add-product-to-cart">Add Product to Cart</a>
				<a href="#get-current-user-cart">Get Current User Cart</a>
				<a href="#get-all-carts">Get All Carts (Admin Only)</a>
				<a href="#delete-product-from-cart">Delete Product from Cart</a>
			</div>

			<a href="#business">Business</a>
			<div class="submenu">
				<a href="#get-business-info">Get Business Info</a>
				<a href="#update-business-info">Update Business Info</a>
			</div>

			<a href="#orders">Orders</a>
			<div class="submenu">
				<a href="#create-new-order">Create New Order</a>
				<a href="#get-all-orders">Get All Orders</a>
				<a href="#get-orders-by-user-id">Get Orders by User ID</a>
				<a href="#get-order-details">Get Order Details</a>
				<a href="#update-order-status">Update Order Status</a>
			</div>

			<a href="#discounts">Discounts</a>
			<div class="submenu">
				<a href="#get-discounted-products">Get Discounted Products</a>
			</div>

			<a href="#receipts">Receipts</a>
			<div class="submenu">
				<a href="#create-receipt">Create Receipt</a>
				<a href="#get-all-receipts">Get All Receipts</a>
				<a href="#get-receipts-by-user-id">Get Receipts by User ID</a>
			</div>
		</div>

		<div id="content">
			<h1 id="overview">Shok Habena Market API Documentation</h1>
			<p>
				This is the server-side implementation of the Shok Habena Market
				e-commerce platform. It serves as the backend API for managing users,
				products, orders, carts, receipts, business information, and discounts. It
				also includes real-time features powered by Socket.IO for instant updates
				to users and admins and uses Google OAuth for google registration/login.
			</p>

			<hr />

			<h2 id="features">Features</h2>
			<ul>
				<li>
					<strong>RESTful API</strong> for managing all data (users, products,
					carts, orders, etc.)
				</li>
				<li><strong>MongoDB</strong> for flexible and scalable data storage</li>
				<li>
					<strong>JWT-based Authentication</strong> and role-based access
					(Client, Moderator, Admin)
				</li>
				<li>
					<strong>Socket.IO</strong> for real-time communication:
					<ul>
						<li>Order status updates</li>
						<li>New order notifications for admins and Moderators</li>
						<li>Discount alerts</li>
					</ul>
				</li>
				<li>
					<strong>CORS & Middleware Setup</strong> for secure communication with
					the client
				</li>
				<li><strong>PDF Receipt Generation</strong></li>
				<li>
					<strong>Validation & Error Handling</strong> included for all routes
				</li>
			</ul>

			<hr />

			<h2 id="technologies">Technologies</h2>
			<ul>
				<li>
					<strong>Node.js</strong>: JavaScript runtime for server-side logic
				</li>
				<li><strong>Express.js</strong>: Web framework for building REST APIs</li>
				<li><strong>MongoDB (Atlas)</strong>: NoSQL cloud database</li>
				<li><strong>Mongoose</strong>: ODM for MongoDB</li>
				<li><strong>JWT (jsonwebtoken)</strong>: Secure authentication</li>
				<li><strong>bcryptjs</strong>: Password hashing</li>
				<li><strong>Socket.IO</strong>: Real-time bidirectional communication</li>
				<li><strong>dotenv</strong>: For managing environment variables</li>
				<li>
					<strong>express-validator / Joi / Yup</strong>: Input validation
					(depending on usage)
				</li>
			</ul>

			<hr />

			<h2 id="api-routes">API Routes</h2>

			<h2 id="users">Users</h2>

			<div class="endpoint" id="user-registration">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>User Registration</h3>
					</div>
					<span class="badge post">POST</span>
				</div>
				<div class="endpoint-url">/api/users</div>
				<div class="permissions">Permissions: <span>Public</span></div>

				<h4>Request Body</h4>
				<pre><code>{
    "name": {
        "first": "user",
        "last": "Doe"
    },
    "phone": {
        "phone_1": "0500000000",
        "phone_2": ""
    },
    "address": {
        "city": "אום אל פחם",
        "street": "עין אל דרווה",
        "houseNumber": "24 א"
    },
    "email": "user@example.com",
    "password": "Abc123!",
    "gender": "זכר",
    "image": {
        "url": "",
        "alt": ""
    },
    "terms": true // Required, must have been accepted
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (201 Created):</strong> Returns registration
						success message.
					</p>
					<pre><code>{
    "message": "User registered successfully!"
}
</code>
</pre>
					<p>
						<strong>Error (400 Bad Request):</strong> Validation or
						registration errors.
					</p>
					<pre><code>{
    "message": "Validation failed",
    "errors": {
        "email": "Email already exists"
    }
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="user-login">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>User Login</h3>
					</div>
					<span class="badge post">POST</span>
				</div>
				<div class="endpoint-url">/api/users/login</div>

				<div class="permissions">Permissions: <span>Public</span></div>

				<h4>Request Body</h4>
				<pre><code>{
    "email": "user@example.com",
    "password": "Abc123!"
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p><strong>Success (200 OK):</strong> Returns JWT token.</p>
					<pre><code>{
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expiresIn": "1h" // Example expiration time
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> Invalid credentials
						error.
					</p>
					<pre><code>{
    "message": "Invalid email or password"
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="google-auth-verification">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Google OAuth Verification</h3>
					</div>
					<span class="badge post">POST</span>
				</div>
				<div class="endpoint-url">/api/users/google-verify</div>

				<div class="permissions">Permissions: <span>Public</span></div>

				<h4>Request Body</h4>
				<p>
					Send the Google ID token received from the client-side Google OAuth
					process.
				</p>
				<pre><code>{
    "id_token": "YOUR_GOOGLE_ID_TOKEN_HERE"
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Indicates successful
						verification.
					</p>
					<pre><code>{
    "success": true,
    "message": "Google token verified"
}</code></pre>
					<p>
						<strong>Error (400 Bad Request / 401 Unauthorized):</strong> If
						the user doesn’t exist or any other issue occurs with the token.
					</p>
					<pre><code>{
    "success": false,
    "message": "Invalid Google token or user not found"
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="google-login-register">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Google Login/Register</h3>
					</div>
					<span class="badge post">POST</span>
				</div>
				<div class="endpoint-url">/api/users/google-login-register</div>

				<div class="permissions">Permissions: <span>Public</span></div>

				<h4>Request Body</h4>
				<p>
					Send the Google ID token received from the client-side Google OAuth
					process.
				</p>
				<pre><code>{
    "id_token": "YOUR_GOOGLE_ID_TOKEN_HERE"
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns JWT token for the newly
						created or logged-in user.
					</p>
					<pre><code>{
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "message": "User logged in/registered successfully"
}</code></pre>
					<p>
						<strong>Error (400 Bad Request / 401 Unauthorized):</strong>
						Validation or Google token issues.
					</p>
					<pre><code>{
    "message": "Failed to authenticate with Google",
    "details": "Invalid or expired token"
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="get-all-users">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get All Users</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/users</div>

				<div class="permissions">Permissions: <span>Admin</span></div>

				<h4>Request</h4>
				<p>Requires an Admin JWT token in the `Authorization` header.</p>
				<pre><code>Authorization: ADMIN_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> List of users without
						passwords.
					</p>
					<pre><code>[
    {
        "_id": "60d0fe4f74d0a10015b6b123",
        "name": { "first": "John", "last": "Doe" },
        "email": "john.doe@example.com",
        "role": "Client",
        "phone": { "phone_1": "0501234567" },
        "address": { "city": "Tel Aviv", "street": "Example St", "houseNumber": "10" }
    },
    // ... more users
]</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user is not an
						Admin.
					</p>
					<pre><code>{
    "message": "Forbidden: Admins only"
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="get-single-user-by-id">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get Single User by ID</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/users/:userId</div>

				<div class="permissions">
					Permissions: <span>Admin, Moderator, or Client (self)</span>
				</div>

				<h4>Request</h4>
				<p>
					Requires a JWT token in the `Authorization` header. The `:userId` in
					the URL should be the ID of the user to retrieve.
				</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> User details without the
						password.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6b123",
    "name": { "first": "John", "last": "Doe" },
    "email": "john.doe@example.com",
    "role": "Client",
    "phone": { "phone_1": "0501234567" },
    "address": { "city": "Tel Aviv", "street": "Example St", "houseNumber": "10" }
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user doesn't have
						permission to view this user's details.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the user ID does not
						exist.
					</p>
					<pre><code>{
    "message": "User not found"
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="update-user-role">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Update User Role</h3>
					</div>
					<span class="badge patch">PATCH</span>
				</div>
				<div class="endpoint-url">/api/users/role/:userEmail</div>

				<div class="permissions">Permissions: <span>Admin Only</span></div>

				<h4>Request Body</h4>
				<p>Update the role of a user by their email.</p>
				<pre><code>{
    "role": "Client" // or "Moderator", "Admin"
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p><strong>Success (200 OK):</strong> Updated user data.</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6b123",
    "name": { "first": "Jane", "last": "Doe" },
    "email": "jane.doe@example.com",
    "role": "Moderator",
    "phone": { "phone_1": "0501234567" },
    "address": { "city": "Tel Aviv", "street": "Example St", "houseNumber": "10" }
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user is not an
						Admin.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the user email does not
						exist.
					</p>
				</div>
			</div>

			<div class="endpoint" id="complete-user-data">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Complete User Data</h3>
					</div>
					<span class="badge patch">PATCH</span>
				</div>
				<div class="endpoint-url">/api/users/complete/:userId</div>

				<div class="permissions">
					Permissions: <span>Authenticated User (self) or Admin</span>
				</div>

				<h4>Request Body</h4>
				<p>
					To complete a user’s information (e.g., phone number, address), send a
					PATCH request with the new details.
				</p>
				<pre><code>{
    "phone": {
        "phone_1": "0526565458",
        "phone_2": "Optional"
    },
    "address": {
        "city": "City",
        "street": "Street",
        "houseNumber": "Optional"
    }
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p><strong>Success (200 OK):</strong> Updated user data.</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6b123",
    "name": { "first": "John", "last": "Doe" },
    "email": "john.doe@example.com",
    "role": "Client",
    "phone": { "phone_1": "0526565458", "phone_2": "" },
    "address": { "city": "City", "street": "Street", "houseNumber": "Optional" }
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user attempts to
						update another user's data without Admin privileges.
					</p>
					<p><strong>Error (400 Bad Request):</strong> Validation errors.</p>
				</div>
			</div>

			<div class="endpoint" id="change-user-password">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Change User Password</h3>
					</div>
					<span class="badge patch">PATCH</span>
				</div>
				<div class="endpoint-url">/api/users/password/:userId</div>

				<div class="permissions">
					Permissions: <span>Authenticated User (self) or Admin</span>
				</div>

				<h4>Request Body</h4>
				<p>
					To change the password of a user (self or Admin), send a PATCH request
					with the new password. For security, consider including the current
					password as well if changing your own.
				</p>
				<pre><code>{
    "newPassword": "newStrongPassword123!"
    // "currentPassword": "oldPassword123" // Optional: for self-password change verification
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p><strong>Success (200 OK):</strong> Success message.</p>
					<pre><code>{
    "message": "Password updated successfully"
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> Invalid token or
						credentials.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user attempts to
						change another user's password without Admin privileges.
					</p>
					<p>
						<strong>Error (400 Bad Request):</strong> Invalid new password
						(e.g., doesn't meet complexity requirements) or incorrect current
						password.
					</p>
				</div>
			</div>

			<div class="endpoint" id="delete-user">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Delete User</h3>
					</div>
					<span class="badge delete">DELETE</span>
				</div>
				<div class="endpoint-url">/api/users/:userId</div>

				<div class="permissions">
					Permissions: <span>Authenticated User (self) or Admin</span>
				</div>

				<h4>Request</h4>
				<p>
					To delete a user (self or Admin), send a DELETE request. Requires a
					JWT token in the `Authorization` header.
				</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (204 No Content):</strong> User has been deleted.
						(No response body for 204)
					</p>
					<p><strong>Success (200 OK):</strong> If a message is returned.</p>
					<pre><code>{
    "message": "User has been deleted."
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user attempts to
						delete another user without Admin privileges.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the user ID does not
						exist.
					</p>
				</div>
			</div>

			<hr />

			<h2 id="products">Products</h2>

			<div class="endpoint" id="get-all-products">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get All Products</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/products</div>
				<div class="permissions">Permissions: <span>Public</span></div>

				<h4>Query Parameters (Optional)</h4>
				<ul>
					<li>
						<code>category</code> (string): Filter products by category (e.g.,
						`Fruit`, `Vegetable`).
					</li>
					<li>
						<code>sale</code> (boolean): Filter products that are on sale
						(e.g., `true`, `false`).
					</li>
					<li>
						<code>minPrice</code> (number): Filter products with a price
						greater than or equal to this value.
					</li>
					<li>
						<code>maxPrice</code> (number): Filter products with a price less
						than or equal to this value.
					</li>
					<li>
						<code>sortBy</code> (string): Sort products by a specific field
						(e.g., `price`, `product_name`).
					</li>
					<li>
						<code>order</code> (string): Sort order (`asc` for ascending,
						`desc` for descending).
					</li>
					<li>
						<code>limit</code> (number): Maximum number of products to return.
					</li>
					<li>
						<code>skip</code> (number): Number of products to skip for
						pagination.
					</li>
				</ul>
				<p>
					Example: <code>/api/products?category=Fruit&sale=true&limit=10</code>
				</p>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns a list of all products
						(filtered and paginated if query params are used).
					</p>
					<pre><code>[
    {
        "_id": "5f8d8f7d8f7d8f7d8f7d8f7d",
        "product_name": "תות שדה",
        "category": "Fruit",
        "price": 13.5,
        "quantity_in_stock": 87,
        "description": "Fresh and sweet strawberries.",
        "image_url": "https://example.com/strawberry.jpg",
        "sale": false,
        "discount": 0
    },
    {
        "_id": "60a7e0c8b0e7c10015a1b2c3",
        "product_name": "עגבנייה",
        "category": "Vegetable",
        "price": 5.99,
        "quantity_in_stock": 200,
        "description": "Ripe red tomatoes.",
        "image_url": "https://example.com/tomato.jpg",
        "sale": true,
        "discount": 15
    }
]</code></pre>
					<p>
						<strong>Error (404 Not Found):</strong> If no products are found
						matching the criteria.
					</p>
					<pre><code>{
    "message": "No products found"
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="create-product">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Create a New Product</h3>
					</div>
					<span class="badge post">POST</span>
				</div>
				<div class="endpoint-url">/api/products</div>
				<div class="permissions">Permissions: <span>Admin, Moderator</span></div>

				<h4>Request Body</h4>
				<p>Product data in the request body (must follow the productsSchema).</p>
				<pre><code>{
    "product_name": "בננה",
    "category": "Fruit",
    "price": 7.5,
    "quantity_in_stock": 150,
    "description": "Fresh yellow bananas.",
    "image_url": "https://images.unsplash.com/photo-1574044572230-67c4273e9e34",
    "sale": false,
    "discount": 0
}</code></pre>

				<h4>Available Categories:</h4>
				<ul>
					<li>Fruit</li>
					<li>Vegetable</li>
					<li>Meat</li>
					<li>Fish</li>
					<li>Dairy</li>
					<li>Spices</li>
					<li>Bakery</li>
					<li>Beverages</li>
					<li>Frozen</li>
					<li>Snacks</li>
					<li>Baby</li>
					<li>Cleaning</li>
					<li>Pasta and Rice</li>
					<li>Home</li>
					<li>Alcohol</li>
					<li>Health</li>
					<li>Watches</li>
					<li>Women-clothes</li>
					<li>Women-bags</li>
					<li>Cigarettes</li>
				</ul>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (201 Created):</strong> Returns the newly created
						product.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6b123",
    "product_name": "בננה",
    "category": "Fruit",
    "price": 7.5,
    "quantity_in_stock": 150,
    "description": "Fresh yellow bananas.",
    "image_url": "https://images.unsplash.com/photo-1574044572230-67c4273e9e34",
    "sale": false,
    "discount": 0
}</code></pre>
					<p>
						<strong>Error (400 Bad Request):</strong> If the data validation
						fails or the product with the same name already exists.
					</p>
					<pre><code>{
    "message": "Validation error: Product name already exists"
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the user is not an
						Admin or Moderator.
					</p>
					<pre><code>{
    "message": "Unauthorized: Admin or Moderator required"
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="get-specific-products-by-name">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get Specific Product by Name</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/products/specific/:name</div>
				<div class="permissions">Permissions: <span>Admin, Moderator</span></div>

				<h4>Request</h4>
				<p>
					Product name in the URL parameter. Requires an Admin or Moderator JWT
					token.
				</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p><strong>Success (200 OK):</strong> Returns the product details.</p>
					<pre><code>{
    "_id": "5f8d8f7d8f7d8f7d8f7d8f7d",
    "product_name": "תות שדה",
    "category": "Fruit",
    "price": 13.5,
    "quantity_in_stock": 87,
    "description": "Fresh and sweet strawberries.",
    "image_url": "https://example.com/strawberry.jpg",
    "sale": false,
    "discount": 0
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the user is not an
						Admin or Moderator.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the product is not
						found.
					</p>
				</div>
			</div>

			<div class="endpoint" id="update-product-by-name">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Update Product by Name</h3>
					</div>
					<span class="badge put">PUT</span>
				</div>
				<div class="endpoint-url">/api/products/:productName</div>
				<div class="permissions">Permissions: <span>Admin, Moderator</span></div>

				<h4>Request Body</h4>
				<p>
					Product data to update in the request body (must follow the
					productsSchema). Send only the fields you want to update.
				</p>
				<pre><code>{
    "price": 10,
    "quantity_in_stock": 200,
    "sale": true,
    "discount": 10 // that's mean 10%
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p><strong>Success (200 OK):</strong> Returns the updated product.</p>
					<pre><code>{
    "_id": "5f8d8f7d8f7d8f7d8f7d8f7d",
    "product_name": "תות שדה",
    "category": "Fruit",
    "price": 10,
    "quantity_in_stock": 200,
    "description": "Fresh and sweet strawberries.",
    "image_url": "https://example.com/strawberry.jpg",
    "sale": true,
    "discount": 10
}</code></pre>
					<p>
						<strong>Error (400 Bad Request):</strong> If the data validation
						fails.
					</p>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the user is not an
						Admin or Moderator.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the product name does
						not exist.
					</p>
				</div>
			</div>

			<div class="endpoint" id="delete-product">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Delete Product</h3>
					</div>
					<span class="badge delete">DELETE</span>
				</div>
				<div class="endpoint-url">/api/products/:productName</div>
				<div class="permissions">Permissions: <span>Admin, Moderator</span></div>

				<h4>Request</h4>
				<p>
					Product name in the URL parameter. Requires an Admin or Moderator JWT
					token.
				</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (204 No Content):</strong> Product has been
						deleted. (No response body for 204)
					</p>
					<p><strong>Success (200 OK):</strong> If a message is returned.</p>
					<pre><code>{
    "message": "Product has been deleted."
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user is not an
						Admin or Moderator.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the product name does
						not exist.
					</p>
				</div>
			</div>

			<div class="endpoint" id="get-products-by-category">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get Products by Category</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/products/category/:categoryName</div>
				<div class="permissions">Permissions: <span>Public</span></div>

				<h4>Request</h4>
				<p>Category name in the URL parameter.</p>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns a list of products in
						the specified category.
					</p>
					<pre><code>[
    {
        "_id": "5f8d8f7d8f7d8f7d8f7d8f7d",
        "product_name": "בננה",
        "category": "Fruit",
        "price": 7.5,
        "quantity_in_stock": 150,
        "description": "Fresh yellow bananas.",
        "image_url": "https://images.unsplash.com/photo-1574044572230-67c4273e9e34",
        "sale": false,
        "discount": 0
    }
]</code></pre>
					<p>
						<strong>Error (404 Not Found):</strong> If no products are found
						for the given category.
					</p>
					<pre><code>{
    "message": "No products found in this category"
}</code></pre>
				</div>
			</div>

			<hr />

			<h2 id="cart">Cart</h2>

			<div class="endpoint" id="add-product-to-cart">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Add Product to Cart</h3>
					</div>
					<span class="badge post">POST</span>
				</div>
				<div class="endpoint-url">/api/cart</div>
				<div class="permissions">
					Permissions: <span>Authenticated User</span>
				</div>

				<h4>Request Body</h4>
				<p>Product ID and quantity to add to the cart.</p>
				<pre><code>{
    "productId": "60d0fe4f74d0a10015b6b123",
    "quantity": 2
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns the updated cart
						details for the user.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6b456",
    "userId": "60d0fe4f74d0a10015b6b123",
    "products": [
        {
            "productId": "60d0fe4f74d0a10015b6b123",
            "quantity": 2,
            "_id": "60d0fe4f74d0a10015b6b789"
        }
    ],
    "createdAt": "2023-10-26T10:00:00.000Z",
    "updatedAt": "2023-10-26T10:00:00.000Z",
    "__v": 0
}</code></pre>
					<p>
						<strong>Error (400 Bad Request):</strong> If validation fails
						(e.g., invalid product ID, insufficient stock).
					</p>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the user is not
						authenticated.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the product does not
						exist.
					</p>
				</div>
			</div>

			<div class="endpoint" id="get-current-user-cart">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get Current User's Cart</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/cart</div>
				<div class="permissions">
					Permissions: <span>Authenticated User</span>
				</div>

				<h4>Request</h4>
				<p>Requires an authenticated JWT token in the `Authorization` header.</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns the current user's cart
						details.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6b456",
    "userId": "60d0fe4f74d0a10015b6b123",
    "products": [
        {
            "productId": {
                "_id": "60d0fe4f74d0a10015b6b123",
                "product_name": "תות שדה",
                "price": 13.5
            },
            "quantity": 2,
            "_id": "60d0fe4f74d0a10015b6b789"
        }
    ],
    "createdAt": "2023-10-26T10:00:00.000Z",
    "updatedAt": "2023-10-26T10:00:00.000Z",
    "__v": 0
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the user is not
						authenticated.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the user's cart does
						not exist (e.g., empty or never created).
					</p>
					<pre><code>{
    "message": "Cart not found for this user"
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="get-all-carts">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get All Carts (Admin Only)</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/cart/all</div>
				<div class="permissions">Permissions: <span>Admin Only</span></div>

				<h4>Request</h4>
				<p>Requires an Admin JWT token in the `Authorization` header.</p>
				<pre><code>Authorization: ADMIN_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p><strong>Success (200 OK):</strong> Returns a list of all carts.</p>
					<pre><code>[
    {
        "_id": "60d0fe4f74d0a10015b6b456",
        "userId": {
            "_id": "60d0fe4f74d0a10015b6b123",
            "name": { "first": "John", "last": "Doe" },
            "email": "john.doe@example.com"
        },
        "products": [
            {
                "productId": {
                    "_id": "60d0fe4f74d0a10015b6b123",
                    "product_name": "תות שדה",
                    "price": 13.5
                },
                "quantity": 2
            }
        ],
        "createdAt": "2023-10-26T10:00:00.000Z"
    }
]</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user is not an
						Admin.
					</p>
				</div>
			</div>

			<div class="endpoint" id="delete-product-from-cart">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Delete Product from Cart</h3>
					</div>
					<span class="badge delete">DELETE</span>
				</div>
				<div class="endpoint-url">/api/cart/:productId</div>
				<div class="permissions">
					Permissions: <span>Authenticated User</span>
				</div>

				<h4>Request</h4>
				<p>
					Product ID in the URL parameter. Requires an authenticated JWT token.
				</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns the updated cart after
						deletion.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6b456",
    "userId": "60d0fe4f74d0a10015b6b123",
    "products": [],
    "createdAt": "2023-10-26T10:00:00.000Z",
    "updatedAt": "2023-10-26T10:00:00.000Z",
    "__v": 0
}</code></pre>
					<p>
						<strong>Error (400 Bad Request):</strong> If the product is not in
						the cart.
					</p>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the user is not
						authenticated.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the product ID does not
						exist or the cart does not exist.
					</p>
				</div>
			</div>

			<hr />

			<h2 id="business">Business</h2>

			<div class="endpoint" id="get-business-info">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get Business Information</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/business</div>
				<div class="permissions">Permissions: <span>Public</span></div>

				<h4>Request</h4>
				<p>No special request headers or body required.</p>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns general business
						information.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6b999",
    "name": "Shok Habena Market",
    "address": "123 Market St, Umm al-Fahm",
    "phone": "050-1234567",
    "email": "info@shokhabena.com",
    "description": "Your local market for fresh produce.",
    "social_media": {
        "facebook": "http://facebook.com/shokhabena",
        "instagram": "http://instagram.com/shokhabena"
    },
    "createdAt": "2023-10-26T10:00:00.000Z",
    "updatedAt": "2023-10-26T10:00:00.000Z",
    "__v": 0
}</code></pre>
					<p>
						<strong>Error (404 Not Found):</strong> If business information is
						not configured.
					</p>
					<pre><code>{
    "message": "Business information not found"
}</code></pre>
				</div>
			</div>

			<div class="endpoint" id="update-business-info">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Update Business Information</h3>
					</div>
					<span class="badge put">PUT</span>
				</div>
				<div class="endpoint-url">/api/business</div>
				<div class="permissions">Permissions: <span>Admin Only</span></div>

				<h4>Request Body</h4>
				<p>
					Fields to update in the business information. Only the fields provided
					will be updated.
				</p>
				<pre><code>{
    "phone": "050-7654321",
    "email": "support@shokhabena.com"
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns the updated business
						information.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6b999",
    "name": "Shok Habena Market",
    "address": "123 Market St, Umm al-Fahm",
    "phone": "050-7654321",
    "email": "support@shokhabena.com",
    "description": "Your local market for fresh produce.",
    "social_media": {
        "facebook": "http://facebook.com/shokhabena",
        "instagram": "http://instagram.com/shokhabena"
    },
    "createdAt": "2023-10-26T10:00:00.000Z",
    "updatedAt": "2023-10-26T10:00:00.000Z",
    "__v": 0
}</code></pre>
					<p>
						<strong>Error (400 Bad Request):</strong> If validation fails for
						provided fields.
					</p>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user is not an
						Admin.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If business information is
						not yet configured.
					</p>
				</div>
			</div>

			<hr />

			<h2 id="orders">Orders</h2>

			<div class="endpoint" id="create-new-order">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Create New Order</h3>
					</div>
					<span class="badge post">POST</span>
				</div>
				<div class="endpoint-url">/api/orders</div>
				<div class="permissions">
					Permissions: <span>Authenticated User</span>
				</div>

				<h4>Request Body</h4>
				<p>
					The request body should contain the order details. This often includes
					the list of products from the user's cart, shipping information, and
					payment method.
				</p>
				<pre><code>{
    "shippingAddress": {
        "city": "Umm al-Fahm",
        "street": "Main St",
        "houseNumber": "15"
    },
    "paymentMethod": "Credit Card" // or "Cash on Delivery"
    // Other relevant order details might be derived from the user's cart
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (201 Created):</strong> Returns the newly created
						order details.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6c001",
    "userId": "60d0fe4f74d0a10015b6b123",
    "products": [
        {
            "productId": "60d0fe4f74d0a10015b6b123",
            "product_name": "תות שדה",
            "quantity": 2,
            "price": 13.5
        }
    ],
    "totalPrice": 27,
    "shippingAddress": {
        "city": "Umm al-Fahm",
        "street": "Main St",
        "houseNumber": "15"
    },
    "paymentMethod": "Credit Card",
    "status": "Pending",
    "orderDate": "2023-10-26T10:30:00.000Z",
    "__v": 0
}</code></pre>
					<p>
						<strong>Error (400 Bad Request):</strong> If validation fails
						(e.g., empty cart, invalid address).
					</p>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the user is not
						authenticated.
					</p>
				</div>
			</div>

			<div class="endpoint" id="get-all-orders">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get All Orders</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/orders/all</div>
				<div class="permissions">Permissions: <span>Admin, Moderator</span></div>

				<h4>Request</h4>
				<p>
					Requires an Admin or Moderator JWT token in the `Authorization`
					header.
				</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns a list of all orders.
					</p>
					<pre><code>[
    {
        "_id": "60d0fe4f74d0a10015b6c001",
        "userId": {
            "_id": "60d0fe4f74d0a10015b6b123",
            "name": { "first": "John", "last": "Doe" },
            "email": "john.doe@example.com"
        },
        "products": [
            {
                "productId": {
                    "_id": "60d0fe4f74d0a10015b6b123",
                    "product_name": "תות שדה"
                },
                "quantity": 2,
                "price": 13.5
            }
        ],
        "totalPrice": 27,
        "status": "Pending",
        "orderDate": "2023-10-26T10:30:00.000Z"
    }
]</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user is not an
						Admin or Moderator.
					</p>
					<p><strong>Error (404 Not Found):</strong> If no orders are found.</p>
				</div>
			</div>

			<div class="endpoint" id="get-orders-by-user-id">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get Orders by User ID</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/orders/user/:userId</div>
				<div class="permissions">
					Permissions: <span>Admin, Moderator, or Client (self)</span>
				</div>

				<h4>Request</h4>
				<p>User ID in the URL parameter. Requires an authenticated JWT token.</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns a list of orders for
						the specified user.
					</p>
					<pre><code>[
    {
        "_id": "60d0fe4f74d0a10015b6c001",
        "userId": "60d0fe4f74d0a10015b6b123",
        "products": [
            {
                "productId": {
                    "_id": "60d0fe4f74d0a10015b6b123",
                    "product_name": "תות שדה"
                },
                "quantity": 2,
                "price": 13.5
            }
        ],
        "totalPrice": 27,
        "status": "Pending",
        "orderDate": "2023-10-26T10:30:00.000Z"
    }
]</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user doesn't have
						permission to view these orders.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If no orders are found for
						the user.
					</p>
				</div>
			</div>

			<div class="endpoint" id="get-order-details">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get Order Details</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/orders/:orderId</div>
				<div class="permissions">
					Permissions:
					<span
						>Admin, Moderator, or Client (self if order belongs to them)</span
					>
				</div>

				<h4>Request</h4>
				<p>Order ID in the URL parameter. Requires an authenticated JWT token.</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns details of the
						specified order.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6c001",
    "userId": {
        "_id": "60d0fe4f74d0a10015b6b123",
        "name": { "first": "John", "last": "Doe" },
        "email": "john.doe@example.com"
    },
    "products": [
        {
            "productId": {
                "_id": "60d0fe4f74d0a10015b6b123",
                "product_name": "תות שדה",
                "price": 13.5
            },
            "quantity": 2,
            "priceAtOrder": 13.5 // Price at the time of order
        }
    ],
    "totalPrice": 27,
    "shippingAddress": {
        "city": "Umm al-Fahm",
        "street": "Main St",
        "houseNumber": "15"
    },
    "paymentMethod": "Credit Card",
    "status": "Pending",
    "orderDate": "2023-10-26T10:30:00.000Z",
    "__v": 0
}</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user doesn't have
						permission to view this order.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the order ID does not
						exist.
					</p>
				</div>
			</div>

			<div class="endpoint" id="update-order-status">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Update Order Status</h3>
					</div>
					<span class="badge patch">PATCH</span>
				</div>
				<div class="endpoint-url">/api/orders/status/:orderId</div>
				<div class="permissions">Permissions: <span>Admin, Moderator</span></div>

				<h4>Request Body</h4>
				<p>New status for the order.</p>
				<pre><code>{
    "status": "Processing" // or "Shipped", "Delivered", "Cancelled"
}</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns the updated order
						details.
					</p>
					<pre><code>{
    "_id": "60d0fe4f74d0a10015b6c001",
    "userId": "60d0fe4f74d0a10015b6b123",
    "products": [
        {
            "productId": "60d0fe4f74d0a10015b6b123",
            "product_name": "תות שדה",
            "quantity": 2,
            "price": 13.5
        }
    ],
    "totalPrice": 27,
    "shippingAddress": {
        "city": "Umm al-Fahm",
        "street": "Main St",
        "houseNumber": "15"
    },
    "paymentMethod": "Credit Card",
    "status": "Processing",
    "orderDate": "2023-10-26T10:30:00.000Z",
    "__v": 0
}</code></pre>
					<p>
						<strong>Error (400 Bad Request):</strong> If the new status is
						invalid.
					</p>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user is not an
						Admin or Moderator.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the order ID does not
						exist.
					</p>
				</div>
			</div>

			<hr />

			<h2 id="discounts">Discounts</h2>

			<div class="endpoint" id="get-discounted-products">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get All Discounted Products</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/discounts</div>
				<div class="permissions">Permissions: <span>Public</span></div>

				<h4>Request</h4>
				<p>No special request headers or body required.</p>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns a list of all products
						that are currently on sale (<code>sale: true</code>).
					</p>
					<pre><code>[
    {
        "_id": "60a7e0c8b0e7c10015a1b2c3",
        "product_name": "עגבנייה",
        "category": "Vegetable",
        "price": 5.99,
        "quantity_in_stock": 200,
        "description": "Ripe red tomatoes.",
        "image_url": "https://example.com/tomato.jpg",
        "sale": true,
        "discount": 15
    },
    {
        "_id": "60d0fe4f74d0a10015b6b123",
        "product_name": "תות שדה",
        "category": "Fruit",
        "price": 13.5,
        "quantity_in_stock": 87,
        "description": "Fresh and sweet strawberries.",
        "image_url": "https://example.com/strawberry.jpg",
        "sale": true,
        "discount": 10
    }
]</code></pre>
					<p>
						<strong>Error (404 Not Found):</strong> If no discounted products
						are found.
					</p>
					<pre><code>{
    "message": "No discounted products found"
}</code></pre>
				</div>
			</div>

			<hr />

			<h2 id="receipts">Receipts</h2>

			<div class="endpoint" id="create-receipt">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Create a New Receipt</h3>
					</div>
					<span class="badge post">POST</span>
				</div>
				<div class="endpoint-url">/api/receipts/:orderId</div>
				<div class="permissions">Permissions: <span>Admin, Moderator</span></div>

				<h4>Request</h4>
				<p>
					Order ID in the URL parameter for which to generate a receipt.
					Requires an Admin or Moderator JWT token.
				</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (201 Created):</strong> Returns the newly created
						receipt.
					</p>
					<pre>
            <code>{
    "_id": "60d0fe4f74d0a10015b6d001",
    "orderId": "60d0fe4f74d0a10015b6c001",
    "userId": "60d0fe4f74d0a10015b6b123",
    "receiptNumber": "REC-20231026-001",
    "issueDate": "2023-10-26T10:45:00.000Z",
    "totalAmount": 27,
    "products": [
        {
            "product_name": "תות שדה",
            "quantity": 2,
            "price": 13.5
        }
    ],
    "__v": 0
  }</code></pre>
					<p>
						<strong>Error (400 Bad Request):</strong> If a receipt already
						exists for the order or the order is not yet delivered.
					</p>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user is not an
						Admin or Moderator.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If the order ID does not
						exist.
					</p>
				</div>
			</div>

			<div class="endpoint" id="get-all-receipts">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get All Receipts</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/receipts/all</div>
				<div class="permissions">Permissions: <span>Admin, Moderator</span></div>

				<h4>Request</h4>
				<p>Requires an Admin or Moderator JWT token.</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns a list of all receipts.
					</p>
					<pre><code>[
    {
        "_id": "60d0fe4f74d0a10015b6d001",
        "orderId": {
            "_id": "60d0fe4f74d0a10015b6c001",
            "totalPrice": 27
        },
        "userId": {
            "_id": "60d0fe4f74d0a10015b6b123",
            "name": { "first": "John", "last": "Doe" }
        },
        "receiptNumber": "REC-20231026-001",
        "issueDate": "2023-10-26T10:45:00.000Z",
        "totalAmount": 27
    }
]</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user is not an
						Admin or Moderator.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If no receipts are found.
					</p>
				</div>
			</div>

			<div class="endpoint" id="get-receipts-by-user-id">
				<div class="endpoint-header">
					<div class="endpoint-title">
						<h3>Get Receipts by User ID</h3>
					</div>
					<span class="badge get">GET</span>
				</div>
				<div class="endpoint-url">/api/receipts/user/:userId</div>
				<div class="permissions">
					Permissions: <span>Admin, Moderator, or Client (self)</span>
				</div>

				<h4>Request</h4>
				<p>User ID in the URL parameter. Requires an authenticated JWT token.</p>
				<pre><code>Authorization: YOUR_JWT_TOKEN</code></pre>

				<div class="response-example">
					<h4>Response</h4>
					<p>
						<strong>Success (200 OK):</strong> Returns a list of receipts for
						the specified user.
					</p>
					<pre><code>[
    {
        "_id": "60d0fe4f74d0a10015b6d001",
        "orderId": {
            "_id": "60d0fe4f74d0a10015b6c001",
            "totalPrice": 27
        },
        "userId": "60d0fe4f74d0a10015b6b123",
        "receiptNumber": "REC-20231026-001",
        "issueDate": "2023-10-26T10:45:00.000Z",
        "totalAmount": 27,
        "products": [
            {
                "product_name": "תות שדה",
                "quantity": 2,
                "price": 13.5
            }
        ]
    }
]</code></pre>
					<p>
						<strong>Error (401 Unauthorized):</strong> If the token is missing
						or invalid.
					</p>
					<p>
						<strong>Error (403 Forbidden):</strong> If the user doesn't have
						permission to view these receipts.
					</p>
					<p>
						<strong>Error (404 Not Found):</strong> If no receipts are found
						for the user.
					</p>
				</div>
			</div>
		</div>
	</body>
</html>
